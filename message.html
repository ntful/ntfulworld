<!DOCTYPE html>
<html lang="en">
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>


    <script>
    async function fetchMessages() {
    let sheetID = "2025761224";
    let url = `https://spreadsheets.google.com/feeds/list/${sheetID}/1/public/values?alt=json`;

    try {
        let response = await fetch(url);
        let data = await response.json();
        let messages = parseGoogleSheetData(data);
        displayMessages(messages);
    } catch (error) {
        console.error("Error fetching Google Sheet data:", error);
    }
}

function parseGoogleSheetData(data) {
    let messages = [];
    let entries = data.feed.entry;

    entries.forEach(row => {
        messages.push({
            PPic: row.gsx$PPic.$t, /* Make sure column names match*/
            Country: row.gsx$Country.$t,
            nMsg: row.gsx$nMsg.$t
        });
    });

    return messages;
}

function displayMessages(messages) {
    let container = document.getElementById("message-container");
    container.innerHTML = ""; // Clear existing messages

    messages.forEach(msg => {
        let messageDiv = document.createElement("div");
        messageDiv.classList.add("message");

        // Profile Picture
        let profilePic = document.createElement("div");
        profilePic.classList.add("profile-pic");
        profilePic.style.backgroundImage = `url(${msg.PPic || 'default.jpg'})`; // Set background image from 'PPic'

        // Message Details
        let detailsDiv = document.createElement("div");
        detailsDiv.classList.add("message-details");

        // Country (Name)
        let nameDiv = document.createElement("div");
        nameDiv.classList.add("name");
        nameDiv.textContent = msg.Country; // Use 'Country' from the sheet

        // Number of Messages
        let textDiv = document.createElement("div");
        textDiv.classList.add("message-text");
        textDiv.textContent = `${msg.nMsg} Messages`; // Use 'nMsg' from the sheet

        // Append details to the message
        detailsDiv.appendChild(nameDiv);
        detailsDiv.appendChild(textDiv);
        messageDiv.appendChild(profilePic);
        messageDiv.appendChild(detailsDiv);

        // Append message to the container
        container.appendChild(messageDiv);
    });
}

        
}

/* Call the function on page load */
fetchMessages();

        
</script>

 
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message</title>
    <style>
        /* Reset margin and padding for the whole page */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            flex-direction: column;
            justify-content: space-between; /* Ensures space between top and bottom */
        }

/* WHAT EVER IS HERE SHOULD BE THE CONTENT */
        /* Header with MESSAGE label */
        header {
            color: #333;
            padding: 20px 5px;
            font-size: 17px;
            display: flex;
            align-items: center;
        }

        header h1 {
            margin: 0;
        }

/* Style the message container */
        /* Style the message container to take up available space and allow scrolling */
        .message-container {
            padding: 20px;
            overflow-y: auto; /* Makes the message container scrollable */
            max-height: calc(100% - 60px); /* Ensures the message container takes up all available space except for the bottom buttons */
        }
                
        /* Individual message box */
            /* Ensure the message entry is displayed in a row (flex direction) */
            .message {
                display: flex;
                align-items: center; /* Aligns the content vertically centered */
                flex-wrap: nowrap;
                background-color: white;
                padding: 10px;
                margin: 10px 0;
                border-radius: 10px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                width: 100%; /* Ensures message stays within the container */
                max-width: 600px; /* Optional: Set a max width to prevent too wide messages */
            }
            
            /* Profile picture styling (keeps it circular and sized) */
            .profile-pic {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background-color: #ccc;
                margin-right: 5px; /* Space between the profile picture and message */
            }
            
            /* Styling for the message details (name and message) */
            .message-details {
                display: flex;
                flex-direction: column; /* Stack name and message vertically */
            }
            
            /* Name styling */
            .name {
                font-weight: bold;
                margin-bottom: 5px;
            }
            
            /* Message text styling */
            .message-text {
                color: #555;
            }

        /* Ensure the entire page is responsive */
        @media (max-width: 600px) {
            header {
                font-size: 16px;
                padding: 20px;
            }

            .message {
                flex-direction: column; /* Stack the profile pic, name, and message vertically on mobile */
                align-items: flex-start; /* Align to the left on smaller screens */
            }

            .message-details {
                margin-top: 10px; /* Space between the profile pic and the name/message */
                flex-direction: column;
            }
            .profile-pic {
                margin-right: 0; /* Remove space between the profile picture and message */
                margin-bottom: 10px;
            }
        }

/* WHAT EVER IS HERE SHOULD BE THE CONTENT */
        /* Bottom button container */
        .bottom-buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            display: flex;
            justify-content: space-around; /* Space out the buttons */
            align-items: center;
            background-color: #fff;
            padding: 8px;
            width: 100%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        /* Style for image buttons */
        .button img {
            width: 36px; /* Set the size of the images */
            height: 36px; /* Maintain square shape */
            object-fit: contain; /* Ensure image fits within the button */
            cursor: pointer; /* Change cursor to indicate clickable */
        }

        /* Hover effect for image buttons */
        .button img:hover {
            opacity: 0.8; /* Slight fade effect on hover */
        }
    </style>
</head>
<body>
    <header>
        <h1>Messages</h1>
    </header>



<div id="message-container" class="message-container">
    <div class="message">
        <div class="profile-pic"></div>
        <div class="message-details">
            <div class="name"></div>
            <div class="message-text"></div>
        </div>
    </div>
</div>

    
<!-- Message Container (this is where dynamic content will go) 
    <div class="message-container">
        <div class="message">
           
            <div class="profile-pic"></div>

          
            <div class="message-details">
                <div class="name">Japan</div>
                <div class="message-text"> 3 Messages.</div>
            </div>
        </div>
    </div> -->


    

        
    <div class="bottom-buttons">
        <div class="button">
            <img src="mbtn2.svg"> <!-- Replace with your image source -->
        </div>
        <div class="button">
            <img src="wbtn1.svg"> <!-- Replace with your image source -->
        </div>
        <div class="button">
            <img src="sbtn1.svg"> <!-- Replace with your image source -->
        </div>
    </div>
</body>
</html>
